(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/Jth/Git Repository/Home/finance-home/app/data:0b80fc [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"00039bbf824c6cf6f3f31d679e5454b7087aa83620":"getFinanceData"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "getFinanceData",
    ()=>getFinanceData
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var getFinanceData = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("00039bbf824c6cf6f3f31d679e5454b7087aa83620", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getFinanceData"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMlRBd0tzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:3d9791 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40d1d772545060c014e567ca1cc45ca81fa41e0879":"createTransaction"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "createTransaction",
    ()=>createTransaction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var createTransaction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40d1d772545060c014e567ca1cc45ca81fa41e0879", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createTransaction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOFRBNk5zQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:65289e [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40a6494eb23e86774bbc4cd3b762988938ca6ab1f9":"createAccount"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "createAccount",
    ()=>createAccount
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var createAccount = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40a6494eb23e86774bbc4cd3b762988938ca6ab1f9", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createAccount"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMFRBOGJzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:ecee6b [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40e0cc86317e5bbbc92ce5488fd0aca39cbd2bb382":"deleteAccount"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "deleteAccount",
    ()=>deleteAccount
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var deleteAccount = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40e0cc86317e5bbbc92ce5488fd0aca39cbd2bb382", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteAccount"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMFRBK2JzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:dc61bb [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"407c575f36b6abf59084d90735f41e90aa840e68ec":"createCategory"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "createCategory",
    ()=>createCategory
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var createCategory = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("407c575f36b6abf59084d90735f41e90aa840e68ec", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createCategory"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMlRBaWNzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:6bae3d [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40a3a35a0de80c6315f5b4b808492893738d32a019":"saveSimulatorItem"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "saveSimulatorItem",
    ()=>saveSimulatorItem
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var saveSimulatorItem = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40a3a35a0de80c6315f5b4b808492893738d32a019", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "saveSimulatorItem"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOFRBK2NzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:02fc15 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"402bf14f37e0dac638b5f9d2f991f72f4f1a9b331a":"deleteSimulatorItem"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "deleteSimulatorItem",
    ()=>deleteSimulatorItem
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var deleteSimulatorItem = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("402bf14f37e0dac638b5f9d2f991f72f4f1a9b331a", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteSimulatorItem"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiZ1VBZ2RzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:11299b [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"402b83f4bbc7ae16a5a9b415e2c3ecca947aeffc06":"createFixedRule"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "createFixedRule",
    ()=>createFixedRule
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var createFixedRule = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("402b83f4bbc7ae16a5a9b415e2c3ecca947aeffc06", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createFixedRule"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiNFRBcWNzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:21da9e [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"4079df49fafe45a1ab1e12d9a3bd024a49017ff973":"deleteCategory"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "deleteCategory",
    ()=>deleteCategory
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var deleteCategory = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("4079df49fafe45a1ab1e12d9a3bd024a49017ff973", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteCategory"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMlRBa2NzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:4073ba [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40316778cb353211f011f5d54bf25a3dfbe3e909e1":"updateCategory"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "updateCategory",
    ()=>updateCategory
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var updateCategory = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40316778cb353211f011f5d54bf25a3dfbe3e909e1", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "updateCategory"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMlRBbWNzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:cf9e06 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"406c20e6a69942bace393f44cef982f40e5508fbfd":"deleteTransaction"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "deleteTransaction",
    ()=>deleteTransaction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var deleteTransaction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("406c20e6a69942bace393f44cef982f40e5508fbfd", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteTransaction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOFRBb2NzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:4fd6af [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40f8ff2eb8230be2e90afdebebc50430d1370f14e4":"updateAccount"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "updateAccount",
    ()=>updateAccount
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var updateAccount = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40f8ff2eb8230be2e90afdebebc50430d1370f14e4", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "updateAccount"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMFRBZ2NzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:bd1b93 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"4086d78b4cf852eced4c082dd17fb545b408bf00c1":"updateFixedRule"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "updateFixedRule",
    ()=>updateFixedRule
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var updateFixedRule = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("4086d78b4cf852eced4c082dd17fb545b408bf00c1", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "updateFixedRule"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiNFRBMGNzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:8cb549 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40235ab7bf48351d601dd29c63317b315360906a50":"deleteFixedRule"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "deleteFixedRule",
    ()=>deleteFixedRule
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var deleteFixedRule = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40235ab7bf48351d601dd29c63317b315360906a50", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteFixedRule"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiNFRBOGNzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/context/FinanceContext.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// context/FinanceContext.tsx
__turbopack_context__.s([
    "FinanceProvider",
    ()=>FinanceProvider,
    "useFinance",
    ()=>useFinance
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/navigation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
// 1. IMPORTAR LAS NUEVAS ACCIONES
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$0b80fc__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:0b80fc [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$3d9791__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:3d9791 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$65289e__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:65289e [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$ecee6b__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:ecee6b [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$dc61bb__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:dc61bb [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$6bae3d__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:6bae3d [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$02fc15__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:02fc15 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$11299b__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:11299b [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$21da9e__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:21da9e [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$4073ba__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:4073ba [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$cf9e06__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:cf9e06 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$4fd6af__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:4fd6af [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$bd1b93__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:bd1b93 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$8cb549__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:8cb549 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$uuid$2f$dist$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/uuid/dist/v4.js [app-client] (ecmascript) <export default as v4>");
;
var _s = __turbopack_context__.k.signature(), _s1 = __turbopack_context__.k.signature();
"use client";
;
;
;
;
const FinanceContext = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createContext"])(undefined);
const FinanceProvider = ({ children })=>{
    _s();
    // 2. INICIALIZAR ROUTER
    const router = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"])();
    const [accounts, setAccounts] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [transactions, setTransactions] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [categories, setCategories] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [fixedRules, setFixedRules] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [simulatorItems, setSimulatorItems] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [currentUser, setCurrentUser] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    // CARGAR DATOS
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "FinanceProvider.useEffect": ()=>{
            const initData = {
                "FinanceProvider.useEffect.initData": async ()=>{
                    try {
                        const data = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$0b80fc__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["getFinanceData"])();
                        // CASO NO AUTORIZADO
                        // @ts-ignore
                        if (data.unauthorized) {
                            // Si estamos en /login no hacemos nada, si estamos dentro, el middleware o el usuario redirige
                            return;
                        }
                        // CASO DEMO o REAL (Ambos traen estructura similar ahora)
                        // @ts-ignore
                        setAccounts(data.accounts || []);
                        // @ts-ignore
                        setTransactions(data.transactions || []);
                        // @ts-ignore
                        setCategories(data.categories || []);
                        // @ts-ignore
                        setFixedRules(data.fixedRules || []);
                        // @ts-ignore
                        setSimulatorItems(data.simulatorItems || []);
                        // @ts-ignore
                        setCurrentUser(data.currentUser || null);
                    } catch (e) {
                        console.error(e);
                    }
                }
            }["FinanceProvider.useEffect.initData"];
            initData();
        }
    }["FinanceProvider.useEffect"], []);
    // --- TRANSACCIONES ---
    const addTransaction = async (t)=>{
        // CASO 1: TRANSFERENCIA (Crear 2 Movimientos visuales)
        if (t.type === 'transfer') {
            const txExpense = {
                ...t,
                id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$uuid$2f$dist$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                type: 'expense',
                description: `Transferencia a: ${t.destAccountName}`,
                isTransfer: true,
                didWithdraw: true
            };
            const txIncome = {
                ...t,
                id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$uuid$2f$dist$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                type: 'income',
                accountId: t.relatedAccountId,
                relatedAccountId: t.accountId,
                description: `Recibido de: ${t.originAccountName}`,
                isTransfer: true,
                didWithdraw: false
            };
            // Agregamos AMBOS al estado
            setTransactions((prev)=>[
                    txExpense,
                    txIncome,
                    ...prev
                ]);
            // Actualizar saldos
            setAccounts((prev)=>prev.map((acc)=>{
                    if (acc.id === t.accountId) return {
                        ...acc,
                        balance: acc.balance - t.amount
                    };
                    if (acc.id === t.relatedAccountId) return {
                        ...acc,
                        balance: acc.balance + t.amount
                    };
                    return acc;
                }));
        } else {
            const tempId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$uuid$2f$dist$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])();
            const optimisticTx = {
                ...t,
                id: tempId
            };
            setTransactions((prev)=>[
                    optimisticTx,
                    ...prev
                ]);
            /*
            const shouldUpdateBalance = t.type === 'expense' && t.isSavings ? t.didWithdraw : true;
            if (shouldUpdateBalance) {
                const multiplier = t.type === 'income' ? 1 : -1;
                setAccounts(prev => prev.map(acc => {
                    if (acc.id === t.accountId) return { ...acc, balance: acc.balance + (t.amount * multiplier) };
                    return acc;
                }));
            }

            // Optimista Ahorro (Suma)
            if (t.isSavings) {
                setAccounts(prev => {
                    const hasVirtual = prev.some(a => a.type === 'savings_virtual');
                    if (hasVirtual) return prev.map(a => a.type === 'savings_virtual' ? { ...a, balance: a.balance + t.amount } : a);
                    return prev;
                });
            }
            // Optimista Gastar de Ahorro (Resta) -> NUEVO
            if (t.payWithSavings) {
                setAccounts(prev => {
                    const hasVirtual = prev.some(a => a.type === 'savings_virtual');
                    if (hasVirtual) return prev.map(a => a.type === 'savings_virtual' ? { ...a, balance: a.balance - t.amount } : a);
                    return prev;
                });
            }

            // Optimista Regla Fija
            if (t.createFixedRule && t.type === 'expense') {
                const newOptimisticRule: FixedExpenseRule = {
                    id: uuidv4(),
                    householdId: currentUser?.householdId || 'demo',
                    description: t.description,
                    categoryId: t.categoryId,
                    budgetedAmount: t.amount,
                    accountIdToCharge: t.accountId,
                    dayOfMonth: t.dayOfMonth || new Date().getDate(),
                    isActive: true
                };
                setFixedRules(prev => [...prev, newOptimisticRule]);
            }*/ // Lgica de Saldos Visuales
            setAccounts((prev)=>prev.map((acc)=>{
                    // A. Si es Gasto de Ahorro: Restamos Balance y Restamos BalanceSafe de la cuenta real
                    if (t.payWithSavings && t.type === 'expense' && acc.id === t.accountId) {
                        return {
                            ...acc,
                            balance: acc.balance - t.amount,
                            balanceSafe: (acc.balanceSafe || 0) - t.amount
                        };
                    }
                    // B. Si es Guardar Ahorro (Expense): Solo sube BalanceSafe, Balance total igual
                    if (t.isSavings && t.type === 'expense' && acc.id === t.accountId) {
                        return {
                            ...acc,
                            balanceSafe: (acc.balanceSafe || 0) + t.amount
                        };
                    }
                    // C. Si es Ingreso Ahorro: Suben ambos
                    if (t.isSavings && t.type === 'income' && acc.id === t.accountId) {
                        return {
                            ...acc,
                            balance: acc.balance + t.amount,
                            balanceSafe: (acc.balanceSafe || 0) + t.amount
                        };
                    }
                    // D. Gasto/Ingreso Normal
                    if (!t.isSavings && !t.payWithSavings && acc.id === t.accountId) {
                        const multiplier = t.type === 'income' ? 1 : -1;
                        // Solo si didWithdraw es true (o undefined que asume true)
                        if (t.didWithdraw !== false) {
                            return {
                                ...acc,
                                balance: acc.balance + t.amount * multiplier
                            };
                        }
                    }
                    // E. Actualizar Cuenta Virtual Global (Ahorro)
                    if (acc.type === 'savings_virtual') {
                        if (t.isSavings) return {
                            ...acc,
                            balance: acc.balance + t.amount
                        };
                        if (t.payWithSavings) return {
                            ...acc,
                            balance: acc.balance - t.amount
                        };
                    }
                    return acc;
                }));
            // 2. NUEVO: Actualizacin optimista de Reglas Fijas (Admin)
            // Si marcamos "Guardar como recurrente", lo agregamos visualmente a la lista de reglas
            if (t.createFixedRule && t.type === 'expense') {
                const newOptimisticRule = {
                    id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$uuid$2f$dist$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                    householdId: currentUser?.householdId || 'demo',
                    description: t.description,
                    categoryId: t.categoryId,
                    budgetedAmount: t.amount,
                    accountIdToCharge: t.accountId,
                    dayOfMonth: t.dayOfMonth || new Date().getDate(),
                    isActive: true
                };
                setFixedRules((prev)=>[
                        ...prev,
                        newOptimisticRule
                    ]);
            }
        }
        // 3. Llamada al Servidor
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$3d9791__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["createTransaction"])(t);
        await refreshData();
    };
    const deleteTransaction = async (id)=>{
        // 1. Optimistic UI
        const tx = transactions.find((t)=>t.id === id);
        setTransactions((prev)=>prev.filter((t)=>t.id !== id));
        // Revertir saldo visualmente (bsico)
        if (tx && tx.type !== 'transfer') {
            const multiplier = tx.type === 'income' ? -1 : 1; // Inverso para borrar
            setAccounts((prev)=>prev.map((a)=>a.id === tx.accountId ? {
                        ...a,
                        balance: a.balance + tx.amount * multiplier
                    } : a));
        }
        // 2. Server Action
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$cf9e06__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["deleteTransaction"])(id);
    };
    const updateTransaction = async (t)=>{
        // Implementacin futura si deseas editar montos
        console.log("Edit not implemented yet");
    };
    // --- CUENTAS ---
    const addAccount = async (a)=>{
        setAccounts((prev)=>[
                ...prev,
                a
            ]);
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$65289e__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["createAccount"])(a);
    };
    const deleteAccountAction = async (id)=>{
        setAccounts((prev)=>prev.filter((x)=>x.id !== id));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$ecee6b__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["deleteAccount"])(id);
    };
    const updateAccount = async (a)=>{
        setAccounts((prev)=>prev.map((acc)=>acc.id === a.id ? a : acc));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$4fd6af__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["updateAccount"])(a);
    };
    // --- CATEGORAS ---
    const addCategory = async (c)=>{
        setCategories((prev)=>[
                ...prev,
                c
            ]);
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$dc61bb__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["createCategory"])(c);
    };
    const deleteCategory = async (id)=>{
        setCategories((prev)=>prev.filter((c)=>c.id !== id));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$21da9e__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["deleteCategory"])(id);
    };
    const addSubCategory = async (catId, subName)=>{
        if (!subName) return;
        const categoryToUpdate = categories.find((c)=>c.id === catId);
        if (!categoryToUpdate) return;
        const newSubCategories = [
            ...categoryToUpdate.subCategories || [],
            subName
        ];
        setCategories((prev)=>prev.map((c)=>c.id === catId ? {
                    ...c,
                    subCategories: newSubCategories
                } : c));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$4073ba__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["updateCategory"])({
            ...categoryToUpdate,
            subCategories: newSubCategories
        });
    };
    const removeSubCategory = async (catId, subName)=>{
        const categoryToUpdate = categories.find((c)=>c.id === catId);
        if (!categoryToUpdate) return;
        const newSubCategories = categoryToUpdate.subCategories.filter((s)=>s !== subName);
        setCategories((prev)=>prev.map((c)=>c.id === catId ? {
                    ...c,
                    subCategories: newSubCategories
                } : c));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$4073ba__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["updateCategory"])({
            ...categoryToUpdate,
            subCategories: newSubCategories
        });
    };
    // --- REGLAS FIJAS ---
    const addFixedRule = async (r)=>{
        setFixedRules((prev)=>[
                ...prev,
                r
            ]);
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$11299b__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["createFixedRule"])(r);
    };
    const updateFixedRule = async (r)=>{
        setFixedRules((prev)=>prev.map((rule)=>rule.id === r.id ? r : rule));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$bd1b93__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["updateFixedRule"])(r);
    };
    const deleteFixedRule = async (id)=>{
        setFixedRules((prev)=>prev.filter((r)=>r.id !== id));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$8cb549__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["deleteFixedRule"])(id);
    };
    const markRuleAsPaid = (id, date)=>{
        // Implementacin opcional visual
        console.log("Rule marked as paid", id);
    };
    // --- SIMULADOR ---
    const addSimItem = async (item)=>{
        setSimulatorItems((prev)=>{
            const exists = prev.find((i)=>i.id === item.id);
            if (exists) return prev.map((i)=>i.id === item.id ? item : i);
            return [
                ...prev,
                item
            ];
        });
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$6bae3d__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["saveSimulatorItem"])(item);
    };
    const removeSimItem = async (id)=>{
        setSimulatorItems((prev)=>prev.filter((i)=>i.id !== id));
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$02fc15__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["deleteSimulatorItem"])(id);
    };
    const refreshData = async ()=>{
        try {
            const data = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$0b80fc__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["getFinanceData"])();
            // Verificamos si data existe y no es no autorizado
            if (data && !data.unauthorizeds) {
                // --- CORRECCIN AQU: DOBLE CASTING ---
                // Usamos 'as unknown as Account[]' para forzar la conversin
                // ignorando que Prisma an no "ve" el campo balanceSafe en sus tipos automticos.
                setAccounts(data.accounts || []);
                setTransactions(data.transactions || []);
                setCategories(data.categories || []);
                if (data.fixedRules) {
                    setFixedRules(data.fixedRules || []);
                }
                if (data.simulatorItems) {
                    setSimulatorItems(data.simulatorItems || []);
                }
                if (data.currentUser) {
                    setCurrentUser(data.currentUser);
                }
                router.push('/login'); // <--- TE MANDA AL LOGIN
                return;
            }
        } catch (error) {
            console.error("Error recargando datos:", error);
        }
    };
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "FinanceProvider.useEffect": ()=>{
            refreshData();
        }
    }["FinanceProvider.useEffect"], []);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(FinanceContext.Provider, {
        value: {
            currentUser,
            accounts,
            transactions,
            categories,
            fixedRules,
            simulatorItems,
            addTransaction,
            addAccount,
            deleteAccountAction,
            addCategory,
            addFixedRule,
            addSimItem,
            removeSimItem,
            deleteCategory,
            addSubCategory,
            removeSubCategory,
            // AHORA S PASAMOS LAS IMPLEMENTACIONES REALES
            updateTransaction,
            deleteTransaction,
            updateAccount,
            updateFixedRule,
            deleteFixedRule,
            markRuleAsPaid,
            refreshData
        },
        children: children
    }, void 0, false, {
        fileName: "[project]/Jth/Git Repository/Home/finance-home/context/FinanceContext.tsx",
        lineNumber: 386,
        columnNumber: 9
    }, ("TURBOPACK compile-time value", void 0));
};
_s(FinanceProvider, "jn7meOI6dahx4EHdT1QEdOcWQzs=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"]
    ];
});
_c = FinanceProvider;
const useFinance = ()=>{
    _s1();
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useContext"])(FinanceContext);
    if (!context) throw new Error("useFinance Error");
    return context;
};
_s1(useFinance, "b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=");
var _c;
__turbopack_context__.k.register(_c, "FinanceProvider");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/lib/utils.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "cn",
    ()=>cn
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/clsx/dist/clsx.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/tailwind-merge/dist/bundle-mjs.mjs [app-client] (ecmascript)");
;
;
function cn(...inputs) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["twMerge"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["clsx"])(inputs));
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>RealisticAccountCard
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/context/FinanceContext.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$wallet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Wallet$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/wallet.js [app-client] (ecmascript) <export default as Wallet>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$building$2d$2$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Building2$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/building-2.js [app-client] (ecmascript) <export default as Building2>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$banknote$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Banknote$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/banknote.js [app-client] (ecmascript) <export default as Banknote>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$credit$2d$card$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__CreditCard$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/credit-card.js [app-client] (ecmascript) <export default as CreditCard>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$lock$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Lock$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/lock.js [app-client] (ecmascript) <export default as Lock>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$piggy$2d$bank$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PiggyBank$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/piggy-bank.js [app-client] (ecmascript) <export default as PiggyBank>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/lib/utils.ts [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
function RealisticAccountCard({ account }) {
    _s();
    const { transactions } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useFinance"])();
    // 1. Traemos el ahorro de las cuentas
    const totalBalanceSafe = account.balanceSafe;
    // 2. El "Balance" que viene de la BD ya incluye todo (porque decidimos no restarlo).
    //    As que el "Disponible" es el Total menos el Ahorro Reservado.
    const totalBalance = account.balance;
    const availableBalance = totalBalance - totalBalanceSafe;
    const Icon = account.type === 'wallet' ? __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$wallet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Wallet$3e$__["Wallet"] : account.type === 'savings_virtual' ? __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$piggy$2d$bank$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PiggyBank$3e$__["PiggyBank"] : account.type === 'cash' ? __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$banknote$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Banknote$3e$__["Banknote"] : account.type === 'bond' ? __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$credit$2d$card$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__CreditCard$3e$__["CreditCard"] : __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$building$2d$2$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Building2$3e$__["Building2"];
    const cardColor = account.color || '#66667aff';
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "relative overflow-hidden rounded-xl p-4 bg-zinc-900 border border-zinc-800 shadow-md transition-all hover:scale-[1.02]",
        style: {
            borderLeft: `4px solid ${cardColor}`,
            borderRight: `4px solid ${cardColor}`,
            backgroundColor: `${cardColor}26`
        },
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex justify-between items-start mb-3",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex items-center gap-3",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "w-3 h-3 rounded-sm shadow-[0_0_10px_rgba(0,0,0,0.5)]",
                                style: {
                                    backgroundColor: cardColor
                                }
                            }, void 0, false, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                lineNumber: 31,
                                columnNumber: 13
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                                        className: "text-lg font-bold text-white leading-tight",
                                        children: account.name
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 33,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-xs text-zinc-500 font-medium",
                                        children: [
                                            " ",
                                            account.bank,
                                            " "
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 34,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                lineNumber: 32,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                        lineNumber: 30,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(Icon, {
                        className: "text-zinc-600 opacity-50",
                        size: 20
                    }, void 0, false, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                        lineNumber: 39,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                lineNumber: 29,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "space-y-2",
                children: [
                    totalBalanceSafe > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex justify-between items-center bg-blue-900/20 px-2 py-1 rounded border border-blue-900/30",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "flex items-center gap-1 text-blue-400 text-xs",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$lock$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Lock$3e$__["Lock"], {
                                        size: 10
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 47,
                                        columnNumber: 21
                                    }, this),
                                    " ",
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                        children: "Reservado Ahorro"
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 47,
                                        columnNumber: 40
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                lineNumber: 46,
                                columnNumber: 17
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                className: "text-blue-300 text-xs font-mono font-bold",
                                children: [
                                    "$",
                                    totalBalanceSafe.toLocaleString()
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                lineNumber: 49,
                                columnNumber: 17
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                        lineNumber: 45,
                        columnNumber: 13
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex justify-between items-end border-t border-zinc-800 pt-2 mt-2",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "text-left",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-[10px] text-zinc-500 uppercase tracking-wider",
                                        children: "Total Banco"
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 55,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-xs text-zinc-400 font-mono",
                                        children: [
                                            "$",
                                            totalBalance.toLocaleString()
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 56,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                lineNumber: 54,
                                columnNumber: 14
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "text-right",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-[10px] text-zinc-400 uppercase tracking-wider font-bold",
                                        children: "Disponible Real"
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 59,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("text-xl font-mono font-bold tracking-tight", availableBalance >= 0 ? "text-emerald-400" : "text-rose-400"),
                                        children: [
                                            "$",
                                            availableBalance.toLocaleString('es-CO')
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                        lineNumber: 60,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                                lineNumber: 58,
                                columnNumber: 14
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                        lineNumber: 53,
                        columnNumber: 10
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
                lineNumber: 42,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx",
        lineNumber: 25,
        columnNumber: 5
    }, this);
}
_s(RealisticAccountCard, "eSufFZ39NlrRk4xvHD1H5cuTyXw=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useFinance"]
    ];
});
_c = RealisticAccountCard;
var _c;
__turbopack_context__.k.register(_c, "RealisticAccountCard");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/components/ui/button.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Button",
    ()=>Button,
    "buttonVariants",
    ()=>buttonVariants
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f40$radix$2d$ui$2f$react$2d$slot$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/@radix-ui/react-slot/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$class$2d$variance$2d$authority$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/class-variance-authority/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/lib/utils.ts [app-client] (ecmascript)");
;
;
;
;
const buttonVariants = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$class$2d$variance$2d$authority$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cva"])("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive", {
    variants: {
        variant: {
            default: "bg-primary text-primary-foreground hover:bg-primary/90",
            destructive: "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
            outline: "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
            secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
            ghost: "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
            link: "text-primary underline-offset-4 hover:underline"
        },
        size: {
            default: "h-9 px-4 py-2 has-[>svg]:px-3",
            sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
            lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
            icon: "size-9",
            "icon-sm": "size-8",
            "icon-lg": "size-10"
        }
    },
    defaultVariants: {
        variant: "default",
        size: "default"
    }
});
function Button({ className, variant = "default", size = "default", asChild = false, ...props }) {
    const Comp = asChild ? __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f40$radix$2d$ui$2f$react$2d$slot$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Slot"] : "button";
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(Comp, {
        "data-slot": "button",
        "data-variant": variant,
        "data-size": size,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])(buttonVariants({
            variant,
            size,
            className
        })),
        ...props
    }, void 0, false, {
        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/ui/button.tsx",
        lineNumber: 52,
        columnNumber: 5
    }, this);
}
_c = Button;
;
var _c;
__turbopack_context__.k.register(_c, "Button");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/app/data:9d769b [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"00c8f5ca09e1a0fa4673050cc659a42b359dd9bc3e":"logoutAction"},"Jth/Git Repository/Home/finance-home/app/actions.ts",""] */ __turbopack_context__.s([
    "logoutAction",
    ()=>logoutAction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
"use turbopack no side effects";
;
var logoutAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("00c8f5ca09e1a0fa4673050cc659a42b359dd9bc3e", __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "logoutAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XHJcbmltcG9ydCB7IHNpZ25Ub2tlbiwgdmVyaWZ5VG9rZW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuaW1wb3J0IHsgc2VuZEF1dGhFbWFpbCwgc2VuZFJlZ2lzdHJhdGlvblJlcXVlc3RFbWFpbCB9IGZyb20gJ0AvbGliL21haWwnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZURlbW9EYXRhIH0gZnJvbSAnQC9saWIvZGVtb0RhdGEnO1xyXG5cclxuXHJcbi8vIC0tLSBHTE9CQUwgUFJJU01BIC0tLVxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbi8vIC0tLSBPQlRFTkVSIFVTVUFSSU8gQUNUVUFMIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICAgIC8vIDEuIFZlcmlmaWNhciBmaXJtYSBkZWwgdG9rZW5cclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IFxyXG4gICAgICAgICAgICB3aGVyZTogeyBpZDogcGF5bG9hZC5pZCBhcyBzdHJpbmcgfSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgZWwgdXN1YXJpbyBlbiBCRCwgcmV0b3JuYW1vcyBudWxsIChpbnbDoWxpZG8pXHJcbiAgICAgICAgcmV0dXJuIHVzZXI7IFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvciApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcmV0dXJuIGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxufVxyXG5cclxuLy8gLS0tIENSRUFSIFVTVUFSSU8gKFBhcmEgZWwgYm90w7NuIEFkbWluKSAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIobmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBob3VzZWhvbGRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIHNlZ3VyaWRhZCBiw6FzaWNhOiBTb2xvIFVzZXIgTWFzdGVyIHB1ZWRlIGNyZWFyIHVzdWFyaW9zXHJcbiAgICBpZiAoY3VycmVudFVzZXI/LmVtYWlsICE9PSBwcm9jZXNzLmVudi5HTUFJTF9VU0VSKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRWwgdXN1YXJpbyB5YSBleGlzdGUuJyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5Ib3VzZUhvbGQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7IHdoZXJlOiB7IGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJleGlzdGluSG91c2VIb2xkIFwiLCBleGlzdGluSG91c2VIb2xkKTtcclxuICAgICAgICBpZiAoIWV4aXN0aW5Ib3VzZUhvbGQpe1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLCBiYW5rOiAnRWZlY3Rpdm8nLCB0eXBlOiAnd2FsbGV0Jywgb3duZXI6IG5hbWUsIGNvbG9yOiAnIzI1YWIyOGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnQWhvcnJvIEdsb2JhbCcsIGJhbms6ICdBaG9ycm8nLCB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgb3duZXI6IG5hbWUsIGNvbG9yOiAnI2ZiYTMwMGZmJywgaG91c2Vob2xkSWQ6IGhvdXNlaG9sZElkIH0gXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46ICdJTklUJywgLy8gVG9rZW4gaW5pY2lhbCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlLicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBjcmVhbmRvIHVzdWFyaW8gZW4gQkQuJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG4vLyAtLS0gQVVURU5USUNBQ0nDk046IFBBU08gMSAoU09MSUNJVEFSIEPDk0RJR08pIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdExvZ2luQ29kZShlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXN1YXJpbyBubyBlbmNvbnRyYWRvLiBEZWJlcyBzb2xpY2l0YXIgcmVnaXN0cm8uJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBzcGVjaWFscyA9IFwiJSMtLypAPyErX1wiO1xyXG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBzcGVjaWFscy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BlY2lhbHMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBzZWN1cmVDb2RlID0gZGlnaXRzICsgc3BlY2lhbENoYXI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGVtYWlsIH0sIGRhdGE6IHsgdG9rZW46IHNlY3VyZUNvZGUgfSB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRBdXRoRW1haWwoZW1haWwsIHNlY3VyZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1haWxpbmc6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGVudmlhbmRvIGNvcnJlby4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBBVVRFTlRJQ0FDScOTTjogUEFTTyAyIChMT0dJTikgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbkFjdGlvbihlbWFpbDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XHJcblxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudG9rZW4pIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQ8OzZGlnbyBpbmNvcnJlY3RvLicgfTtcclxuXHJcbiAgICBjb25zdCBqd3QgPSBhd2FpdCBzaWduVG9rZW4oeyBcclxuICAgICAgICBpZDogdXNlci5pZCwgXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsIFxyXG4gICAgICAgIGhvdXNlaG9sZElkOiB1c2VyLmhvdXNlaG9sZElkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2F1dGhfdG9rZW4nLCBqd3QsIHsgXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsIFxyXG4gICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDMwLCBcclxuICAgICAgICBwYXRoOiAnLycgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2lzX2RlbW9fbW9kZScpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG4vLyAtLS0gUkVHSVNUUk8gKFNPTElDSVRVRCkgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0cmF0aW9uKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZmFtaWx5TmFtZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0NvcnJlbyB5YSByZWdpc3RyYWRvLicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVudmlhbW9zIG5vbWJyZSwgZW1haWwgeSBmYW1pbGlhIGFsIGNvcnJlb1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25SZXF1ZXN0RW1haWwoZW1haWwsIG5hbWUsIGZhbWlseU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdTb2xpY2l0dWQgZW52aWFkYSBhbCBhZG1pbmlzdHJhZG9yLicgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm9yIGRlIGNvbmV4acOzbi4nIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBMT0dPVVQgLyBERU1PIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RGVtb01vZGVBY3Rpb24oKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG4gICAgLy8gMS4gRXN0YWJsZWNlciBjb29raWUgZGUgRGVtbyAoSW1wb3J0YW50ZTogcGF0aCAnLycpXHJcbiAgICBjb29raWVTdG9yZS5zZXQoJ2lzX2RlbW9fbW9kZScsICd0cnVlJywgeyBcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgLy8gMSBkw61hXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gMi4gQm9ycmFyIHRva2VuIGFudGVyaW9yIHNpIGV4aXN0ZSBwYXJhIGV2aXRhciBjb25mbGljdG9zXHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0QWN0aW9uKCkge1xyXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XHJcbiAgICBjb29raWVTdG9yZS5kZWxldGUoJ2F1dGhfdG9rZW4nKTtcclxuICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnaXNfZGVtb19tb2RlJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbi8vIC0tLSBPQlRFTkVSIERBVE9TIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmluYW5jZURhdGEoKSB7XHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICAgIFxyXG5cclxuICAgIC8vIC0tLSBERU1PIERBVEEgLS0tXHJcbiAgICBjb25zdCBpc0RlbW8gPSBjb29raWVTdG9yZS5nZXQoJ2lzX2RlbW9fbW9kZScpPy52YWx1ZSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtbykge1xyXG4gICAgICAgIGNvbnN0IGRlbW9EYXRhID0gZ2VuZXJhdGVEZW1vRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAuLi5kZW1vRGF0YSxcclxuICAgICAgICAgICAgaXNEZW1vOiB0cnVlLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IHsgZW1haWw6ICdVc3VhcmlvIERlbW8nLCBob3VzZWhvbGRJZDogJ2RlbW8nIH0sXHJcbiAgICAgICAgICAgIHVuYXV0aG9yaXplZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4geyB1bmF1dGhvcml6ZWQ6IHRydWUgfTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFVTRVIgREFUQSAtLS1cclxuICAgIGNvbnN0IGhvdXNlaG9sZElkID0gdXNlci5ob3VzZWhvbGRJZDsgXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBwcmlzbWEuY2F0ZWdvcnkuZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBob3VzZWhvbGRJZCB9LFxyXG4gICAgICAgIC8vIE5PIHBvbmVyIGFxdcOtIHVuIGZpbHRybyBzb2xvIHBhcmEgJ2V4cGVuc2UnLiBcclxuICAgICAgICAvLyBTaSB0aWVuZXMgZmlsdHJvcyBkZSB0aXBvLCBkZWJlbiBpbmNsdWlyICdpbmNvbWUnIHBhcmEgcXVlIHNlIHZlYSBsYSBlbnRyYWRhIGRlIGxhIHRyYW5zZmVyZW5jaWEuXHJcbiAgICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcclxuICAgICAgICBpbmNsdWRlOiB7IFxyXG4gICAgICAgICAgICBhY2NvdW50OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBjb2xvcjogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpeGVkUnVsZXMgPSBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmZpbmRNYW55KHsgd2hlcmU6IHsgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgIGNvbnN0IHNpbXVsYXRvckl0ZW1zID0gYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uZmluZE1hbnkoeyB3aGVyZTogeyBob3VzZWhvbGRJZCB9IH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZSxcclxuICAgICAgICB1bmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICAgIGFjY291bnRzLFxyXG4gICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCBzdWJDYXRlZ29yaWVzOiBjLnN1YkNhdGVnb3JpZXMgPyBKU09OLnBhcnNlKGMuc3ViQ2F0ZWdvcmllcykgOiBbXX0pKSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHRyYW5zYWN0aW9ucy5tYXAodCA9PiAoey4uLnQsIGRhdGU6IHQuZGF0ZS50b0lTT1N0cmluZygpfSkpLFxyXG4gICAgICAgIGZpeGVkUnVsZXMsXHJcbiAgICAgICAgc2ltdWxhdG9ySXRlbXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIC0tLSBDUkVBQ0lPTkVTIFkgVVBEQVRFUyBUUkFOU0FDVElPTlMgLS0tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFuc2FjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47IFxyXG4gICAgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkO1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAvLyAxLiBUUkFOU0ZFUkVOQ0lBOiBDUkVBIERPUyBNT1ZJTUlFTlRPU1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYW5zZmVyJykge1xyXG4gICAgICAgIC8vIEJ1c2Nhci9DcmVhciBjYXRlZ29yw61hXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyQ2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnIH0gfSk7XHJcbiAgICAgICAgaWYgKCF0cmFuc2ZlckNhdCkge1xyXG4gICAgICAgICAgICB0cmFuc2ZlckNhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnVHJhbnNmZXJlbmNpYSBQcm9waWEnLCB0eXBlOiAndHJhbnNmZXInLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbXSkgfSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEuIFNBTElEQSAoR2FzdG8gLSBDdWVudGEgT3JpZ2VuKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIGFtb3VudDogZGF0YS5hbW91bnQsIFxyXG4gICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRyYW5zZmVyZW5jaWEgYTogJHtkYXRhLmRlc3RBY2NvdW50TmFtZX1gLCAvLyBURVhUTyBFWEFDVE9cclxuICAgICAgICAgICAgICAgIGRhdGUsIGlzVHJhbnNmZXI6IHRydWUsIHJlbGF0ZWRBY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgZGlkV2l0aGRyYXc6IHRydWUgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuXHJcbiAgICAgICAgLy8gQi4gRU5UUkFEQSAoSW5ncmVzbyAtIEN1ZW50YSBEZXN0aW5vKVxyXG4gICAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoeyBcclxuICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCB0eXBlOiAnaW5jb21lJywgYW1vdW50OiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEucmVsYXRlZEFjY291bnRJZCwgXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0cmFuc2ZlckNhdC5pZCwgXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFJlY2liaWRvIGRlOiAke2RhdGEub3JpZ2luQWNjb3VudE5hbWV9YCwgLy8gVEVYVE8gRVhBQ1RPXHJcbiAgICAgICAgICAgICAgICBkYXRlLCBpc1RyYW5zZmVyOiB0cnVlLCByZWxhdGVkQWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgZGlkV2l0aGRyYXc6IGZhbHNlIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLnJlbGF0ZWRBY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgLy8gMi4gR0FTVE8gLyBJTkdSRVNPIE5PUk1BTFxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZUJhbGFuY2UgPSBkYXRhLnR5cGUgPT09ICdleHBlbnNlJyA/IGRhdGEuZGlkV2l0aGRyYXcgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC0tLSBHQVNUTyBOT1JNQUwgLS0tXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICBob3VzZWhvbGRJZCwgdHlwZTogZGF0YS50eXBlLCBhbW91bnQ6IGRhdGEuYW1vdW50LCBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCxcclxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIGNhdGVnb3J5SWQ6IGRhdGEuY2F0ZWdvcnlJZCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGRhdGUsIFxyXG4gICAgICAgICAgICAgICAgaXNGaXhlZDogZGF0YS5pc0ZpeGVkIHx8IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIGlzU2F2aW5nczogZGF0YS5pc1NhdmluZ3MgfHwgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgcGF5V2l0aFNhdmluZ3M6IGRhdGEucGF5V2l0aFNhdmluZ3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWRXaXRoZHJhdzogZGF0YS5wYXlXaXRoU2F2aW5ncyA/IHRydWUgOiAoZGF0YS5kaWRXaXRoZHJhdyA/PyB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGRhdGEudHlwZSA9PT0gJ2luY29tZScgPyAxIDogLTE7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBkYXRhOiB7IGJhbGFuY2U6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCAqIG11bHRpcGxpZXIgfSB9IH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgU0FMRE9TIC0tLVxyXG5cclxuICAgICAgICAvLyBBLiBDQVNPIFwiR0FTVEFSIERFIEFIT1JST1wiIChFeHBlbnNlICsgcGF5V2l0aFNhdmluZ3MpXHJcbiAgICAgICAgaWYgKGRhdGEucGF5V2l0aFNhdmluZ3MgJiYgZGF0YS50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgZGVsIGJhbGFuY2UgdG90YWwgWSBkZWwgYmFsYW5jZVNhZmUgZGUgbGEgY3VlbnRhXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlU2FmZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzdGFtb3MgdGFtYmnDqW4gZGVsIEFob3JybyBHbG9iYWwgKEN1ZW50YSBWaXJ0dWFsKVxyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEIuIENBU08gXCJFUyBBSE9SUk9cIiAoR3VhcmRhciBkaW5lcm8pXHJcbiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1NhdmluZ3MpIHtcclxuICAgICAgICAgICAgIC8vIDEuIFNpIGVzIElOR1JFU08geSBlcyBhaG9ycm86IFN1YmUgQmFsYW5jZSBUb3RhbCB5IFN1YmUgQmFsYW5jZVNhZmVcclxuICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSBcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNhdmluZ3NBY2MpIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBzYXZpbmdzQWNjLmlkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgIC8vIDIuIFNpIGVzIEdBU1RPIChTYWNhciBkZWwgYm9sc2lsbG8gZGlhcmlvIHBhcmEgZ3VhcmRhcik6IEVsIGJhbGFuY2UgdG90YWwgTk8gY2FtYmlhIChlbCBkaW5lcm8gc2lndWUgZW4gbGEgY3VlbnRhKSwgcGVybyBzdWJlIGVsIEJhbGFuY2VTYWZlXHJcbiAgICAgICAgICAgICAvLyBOT1RBOiBTaSBlbCB1c3VhcmlvIHF1aWVyZSBxdWUgXCJzYWxnYVwiIGRlIGxhIGN1ZW50YSwgZGViZXLDrWEgdXNhciBUcmFuc2ZlcmVuY2lhLiBBc3VtaW1vcyBxdWUgXCJHYXN0byAtPiBFcyBBaG9ycm9cIiBlcyBhcGFydGFyIGRpbmVyby5cclxuICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgLyphd2FpdCBwcmlzbWEuYWNjb3VudC51cGRhdGUoeyBcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdG9jYW1vcyBiYWxhbmNlIHRvdGFsIHBvcnF1ZSBlbCBkaW5lcm8gbm8gc2UgaGEgaWRvIGRlbCBiYW5jbywgc29sbyBjYW1iacOzIGRlIFwiZXN0YWRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZVNhZmU6IHsgaW5jcmVtZW50OiBkYXRhLmFtb3VudCB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgLy8gLS0tPiBOVUVWQSBMw5NHSUNBOiBSRVRJUk8gRsONU0lDTyBQQVJBIEFIT1JSTyA8LS0tXHJcbiAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlkV2l0aGRyYXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYS4gUmVzdGFtb3MgZGUgbGEgY3VlbnRhIG9yaWdlbiAoQmFuY28pXHJcbiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZGF0YS5hY2NvdW50SWQgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYmFsYW5jZTogeyBkZWNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSAvLyBTb2xvIGRlY3JlbWVudGEgYmFsYW5jZSB0b3RhbCwgbm8gYmFsYW5jZVNhZmUsIHBvcnF1ZSBzYWxpw7MgZGVsIGJhbmNvXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGIuIEJ1c2NhbW9zIChvIGNyZWFtb3MpIGxhIGN1ZW50YSBcIkRpbmVybyBFZmVjdGl2b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhc2hBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnRGluZXJvIEVmZWN0aXZvJyB9IC8vIEJ1c2NhbW9zIHBvciBub21icmUgbyB0aXBvICd3YWxsZXQnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FzaEFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdEaW5lcm8gRWZlY3Rpdm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbms6ICdFZmVjdGl2bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTBiOTgxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogJ0Nhc2EnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYy4gU3VtYW1vcyBhIFwiRGluZXJvIEVmZWN0aXZvXCIgY29tbyBBaG9ycm8gKEJhbGFuY2VTYWZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdcOtIGVsIGRpbmVybyBlbnRyYSBmw61zaWNhbWVudGUgeSBzZSBtYXJjYSBjb21vIHJlc2VydmFkb1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjYXNoQWNjb3VudC5pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VTYWZlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIC0tLT4gTMOTR0lDQSBBTlRJR1VBOiBBSE9SUk8gVklSVFVBTCAoTm8gc2FsZSBkZWwgYmFuY28pIDwtLS1cclxuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYXRhLmFjY291bnRJZCB9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBiYWxhbmNlU2FmZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50IH0gfSBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIEVuIEFNQk9TIGNhc29zLCBlbCBcIkFob3JybyBHbG9iYWxcIiAoRXNwZWpvKSBhdW1lbnRhXHJcbiAgICAgICAgICAgICAgICAgbGV0IHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnc2F2aW5nc192aXJ0dWFsJywgaG91c2Vob2xkSWQgfSB9KTtcclxuICAgICAgICAgICAgICAgICBpZiAoIXNhdmluZ3NBY2MpIHNhdmluZ3NBY2MgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnQm9sc2lsbG8gQWhvcnJvcyBHbG9iYWwnLCBiYW5rOiAnU2lzdGVtYScsIHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBvd25lcjogJ0ZhbWlsaWEnLCBjb2xvcjogJyMzYjgyZjYnIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQy4gQ0FTTyBOT1JNQUwgKEdhc3RvIGNvcnJpZW50ZSBvIEluZ3Jlc28gY29ycmllbnRlKVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGVCYWxhbmNlID0gZGF0YS50eXBlID09PSAnZXhwZW5zZScgPyBkYXRhLmRpZFdpdGhkcmF3IDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUJhbGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBkYXRhLnR5cGUgPT09ICdpbmNvbWUnID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuYWNjb3VudElkIH0sIGRhdGE6IHsgYmFsYW5jZTogeyBpbmNyZW1lbnQ6IGRhdGEuYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZ2xhcyBGaWphcyB5IENyw6lkaXRvIChJZ3VhbCBxdWUgYW50ZXMpXHJcbiAgICAgICAgaWYgKGRhdGEuY3JlYXRlRml4ZWRSdWxlICYmIGRhdGEudHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaG91c2Vob2xkSWQsIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLCBjYXRlZ29yeUlkOiBkYXRhLmNhdGVnb3J5SWQsIGJ1ZGdldGVkQW1vdW50OiBkYXRhLmJ1ZGdldGVkQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50KSA6IGRhdGEuYW1vdW50LCBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWQsIGRheU9mTW9udGg6IGRhdGEuZGF5T2ZNb250aCB8fCBkYXRlLmdldERhdGUoKSwgaXNBY3RpdmU6IHRydWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luY29tZScgJiYgZGF0YS5pc0NyZWRpdCAmJiBkYXRhLmNyZWRpdFF1b3RhVmFsdWUpIHtcclxuICAgICAgICAgICAgIGxldCBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmZpbmRGaXJzdCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkLCB0eXBlOiAnZXhwZW5zZScsIG5hbWU6IHsgY29udGFpbnM6ICdEZXVkYScgfSB9IH0pO1xyXG4gICAgICAgICAgICAgaWYgKCFkZWJ0Q2F0KSBkZWJ0Q2F0ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdQYWdvIERldWRhcycsIHR5cGU6ICdleHBlbnNlJywgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoWydDdW90YSBDcsOpZGl0byddKSB9IH0pO1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBkZXNjcmlwdGlvbjogYEN1b3RhOiAke2RhdGEuZGVzY3JpcHRpb259YCwgY2F0ZWdvcnlJZDogZGVidENhdC5pZCwgYnVkZ2V0ZWRBbW91bnQ6IHBhcnNlRmxvYXQoZGF0YS5jcmVkaXRRdW90YVZhbHVlKSwgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgbmV3IERhdGUoKS5nZXREYXRlKCksIGlzQWN0aXZlOiB0cnVlIH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy8nKTtcclxuICAgIHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgQWhvcnJvIEdsb2JhbCAoU3VtYXIgbyBSZXN0YXIpXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYgKGRhdGEuaXNTYXZpbmdzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYXZpbmdzQWNjID0gYXdhaXQgcHJpc21hLmFjY291bnQuZmluZEZpcnN0KHsgd2hlcmU6IHsgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIGhvdXNlaG9sZElkIH0gfSk7XHJcbiAgICAgICAgICAgIGlmICghc2F2aW5nc0FjYykgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmNyZWF0ZSh7IGRhdGE6IHsgaG91c2Vob2xkSWQsIG5hbWU6ICdCb2xzaWxsbyBBaG9ycm9zIEdsb2JhbCcsIGJhbms6ICdTaXN0ZW1hJywgdHlwZTogJ3NhdmluZ3NfdmlydHVhbCcsIG93bmVyOiAnRmFtaWxpYScsIGNvbG9yOiAnIzNiODJmNicgfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YS5wYXlXaXRoU2F2aW5ncykge1xyXG4gICAgICAgICAgICBsZXQgc2F2aW5nc0FjYyA9IGF3YWl0IHByaXNtYS5hY2NvdW50LmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdzYXZpbmdzX3ZpcnR1YWwnLCBob3VzZWhvbGRJZCB9IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2F2aW5nc0FjYykgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNhdmluZ3NBY2MuaWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogZGF0YS5hbW91bnQgfSB9IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnbGEgRmlqYVxyXG4gICAgICAgIGlmIChkYXRhLmNyZWF0ZUZpeGVkUnVsZSAmJiBkYXRhLnR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXNlaG9sZElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLCBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCA/IHBhcnNlRmxvYXQoZGF0YS5idWRnZXRlZEFtb3VudCkgOiBkYXRhLmFtb3VudCwgXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkVG9DaGFyZ2U6IGRhdGEuYWNjb3VudElkLCBcclxuICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoOiBkYXRhLmRheU9mTW9udGggfHwgZGF0ZS5nZXREYXRlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gLS0tIENSw4lESVRPIEFVVE9Nw4FUSUNPIC0tLVxyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpbmNvbWUnICYmIGRhdGEuaXNDcmVkaXQgJiYgZGF0YS5jcmVkaXRRdW90YVZhbHVlKSB7XHJcbiAgICAgICAgICAgICBsZXQgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kRmlyc3QoeyB3aGVyZTogeyBob3VzZWhvbGRJZCwgdHlwZTogJ2V4cGVuc2UnLCBuYW1lOiB7IGNvbnRhaW5zOiAnRGV1ZGEnIH0gfSB9KTtcclxuICAgICAgICAgICAgIGlmICghZGVidENhdCkgZGVidENhdCA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGhvdXNlaG9sZElkLCBuYW1lOiAnUGFnbyBEZXVkYXMnLCB0eXBlOiAnZXhwZW5zZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnQ3VvdGEgQ3LDqWRpdG8nXSkgfSB9KTtcclxuICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5maXhlZFJ1bGUuY3JlYXRlKHsgZGF0YTogeyBob3VzZWhvbGRJZCwgZGVzY3JpcHRpb246IGBDdW90YTogJHtkYXRhLmRlc2NyaXB0aW9ufWAsIGNhdGVnb3J5SWQ6IGRlYnRDYXQuaWQsIGJ1ZGdldGVkQW1vdW50OiBwYXJzZUZsb2F0KGRhdGEuY3JlZGl0UXVvdGFWYWx1ZSksIGFjY291bnRJZFRvQ2hhcmdlOiBkYXRhLmFjY291bnRJZCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoIHx8IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpLCBpc0FjdGl2ZTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXZhbGlkYXRlUGF0aCgnL2FkbWluJyk7Ki9cclxufVxyXG5cclxuLy8gRnVuY2lvbmVzIENSVUQgZXN0w6FuZGFyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGlkOiBzdHJpbmcpIHsgYXdhaXQgcHJpc21hLmFjY291bnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjb3VudChkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmFjY291bnQudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGJhbms6IGRhdGEuYmFuaywgdHlwZTogZGF0YS50eXBlLCBjb2xvcjogZGF0YS5jb2xvciB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7IGlmKHVzZXIpIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5jcmVhdGUoeyBkYXRhOiB7IGlkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgc3ViQ2F0ZWdvcmllczogSlNPTi5zdHJpbmdpZnkoZGF0YS5zdWJDYXRlZ29yaWVzIHx8IFtdKSwgaG91c2Vob2xkSWQ6IHVzZXIuaG91c2Vob2xkSWQgfX0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeShpZDogc3RyaW5nKSB7IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhOiBhbnkpIHsgYXdhaXQgcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lLCB0eXBlOiBkYXRhLnR5cGUsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEuc3ViQ2F0ZWdvcmllcykgfSB9KTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24oaWQ6IHN0cmluZykgeyBjb25zdCB0eCA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKCF0eCkgcmV0dXJuOyBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTsgaWYgKHR4LmFjY291bnRJZCAmJiB0eC5kaWRXaXRoZHJhdyAmJiAhdHguaXNUcmFuc2ZlcikgeyBjb25zdCBtdWx0aXBsaWVyID0gdHgudHlwZSA9PT0gJ2luY29tZScgPyAtMSA6IDE7IGF3YWl0IHByaXNtYS5hY2NvdW50LnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB0eC5hY2NvdW50SWQgfSwgZGF0YTogeyBiYWxhbmNlOiB7IGluY3JlbWVudDogdHguYW1vdW50ICogbXVsdGlwbGllciB9IH0gfSk7IH0gcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYodXNlcikgYXdhaXQgcHJpc21hLmZpeGVkUnVsZS5jcmVhdGUoeyBkYXRhOiB7IC4uLmRhdGEsIFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY2F0ZWdvcnlJZDogZGF0YS5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBhY2NvdW50SWRUb0NoYXJnZTogZGF0YS5hY2NvdW50SWRUb0NoYXJnZSxcclxuICAgICAgICAgICAgZGF5T2ZNb250aDogcGFyc2VJbnQoZGF0YS5kYXlPZk1vbnRoKSxob3VzZWhvbGRJZDogdXNlci5ob3VzZWhvbGRJZCxidWRnZXRlZEFtb3VudDogcGFyc2VGbG9hdChkYXRhLmJ1ZGdldGVkQW1vdW50IHx8ICcwJyksIHN0YXRpY0Ftb3VudDogZGF0YS5zdGF0aWNBbW91bnQgPyBwYXJzZUZsb2F0KGRhdGEuc3RhdGljQW1vdW50KSA6IG51bGwsIGlzQWN0aXZlOiB0cnVlIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvYWRtaW4nKTsgcmV2YWxpZGF0ZVBhdGgoJy8nKTsgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml4ZWRSdWxlKGRhdGE6IGFueSkgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiBkYXRhLmlkIH0sIGRhdGE6IHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIFxyXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFtb3MgYW1ib3NcclxuICAgICAgICAgICAgLy9zdGF0aWNBbW91bnQ6IGRhdGEuc3RhdGljQW1vdW50ID8gcGFyc2VGbG9hdChkYXRhLnN0YXRpY0Ftb3VudCkgOiBudWxsLFxyXG4gICAgICAgICAgICBidWRnZXRlZEFtb3VudDogZGF0YS5idWRnZXRlZEFtb3VudCwgZGF5T2ZNb250aDogZGF0YS5kYXlPZk1vbnRoLCBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSB9IH0pOyByZXZhbGlkYXRlUGF0aCgnLycpOyB9XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGaXhlZFJ1bGUoaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuZml4ZWRSdWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7IHJldmFsaWRhdGVQYXRoKCcvJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTaW11bGF0b3JJdGVtKGRhdGE6IGFueSkgeyBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsgaWYoIXVzZXIpIHJldHVybjsgY29uc3QgaG91c2Vob2xkSWQgPSB1c2VyLmhvdXNlaG9sZElkOyBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5zaW11bGF0b3JJdGVtLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogZGF0YS5pZCB9IH0pOyBpZiAoZXhpc3RpbmcpIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0udXBkYXRlKHsgd2hlcmU6IHsgaWQ6IGRhdGEuaWQgfSwgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUsIGFtb3VudDogZGF0YS5hbW91bnQgfSB9KTsgfSBlbHNlIHsgYXdhaXQgcHJpc21hLnNpbXVsYXRvckl0ZW0uY3JlYXRlKHsgZGF0YTogeyAuLi5kYXRhLCBob3VzZWhvbGRJZCB9IH0pOyB9IHJldmFsaWRhdGVQYXRoKCcvc2ltdWxhdG9yJyk7IH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNpbXVsYXRvckl0ZW0oaWQ6IHN0cmluZykgeyBhd2FpdCBwcmlzbWEuc2ltdWxhdG9ySXRlbS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyByZXZhbGlkYXRlUGF0aCgnL3NpbXVsYXRvcicpOyB9XHJcblxyXG4vLyAtLS0gU0VFRCAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWREYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IGZhbWlseUlkID0gXCJmYW1pbGlhLWdvbnphbGV6LW1hcmluXCI7XHJcbiAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICdqaG9uYXR0YW4uZ29uemFsZXouMzhAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdKaG9uYXR0YW4nIH0sXHJcbiAgICAgICAgY3JlYXRlOiB7IGVtYWlsOiAnamhvbmF0dGFuLmdvbnphbGV6LjM4QGdtYWlsLmNvbScsIHRva2VuOiAnSU5JVCcsIGhvdXNlaG9sZElkOiBmYW1pbHlJZCwgbmFtZTogJ0pob25hdHRhbicgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBzZXJ0KHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJyB9LFxyXG4gICAgICAgIHVwZGF0ZTogeyBob3VzZWhvbGRJZDogZmFtaWx5SWQsIG5hbWU6ICdUaGFubmlhJyB9LFxyXG4gICAgICAgIGNyZWF0ZTogeyBlbWFpbDogJ21hcmludGhhbmlhMTNAZ21haWwuY29tJywgdG9rZW46ICdJTklUJywgaG91c2Vob2xkSWQ6IGZhbWlseUlkLCBuYW1lOiAnVGhhbm5pYScgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjQ291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudC5jb3VudCh7IHdoZXJlOiB7IGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9IH0pO1xyXG4gICAgaWYgKGFjY0NvdW50ID09PSAwKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmFjY291bnQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICAgIGRhdGE6IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0Rhdml2aWVuZGEnLCBiYW5rOiAnRGF2aXZpZW5kYScsIHR5cGU6ICdiYW5rJywgb3duZXI6ICdKaG9uYXR0YW4nLCBjb2xvcjogJyNlZjQ0NDQnLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ05lcXVpJywgYmFuazogJ05lcXVpJywgdHlwZTogJ2JvbmQnLCBvd25lcjogJ1RoYW5uaWEnLCBjb2xvcjogJyNlYzQ4OTknLCBob3VzZWhvbGRJZDogZmFtaWx5SWQgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTYWxhcmlvJywgdHlwZTogJ2luY29tZScsIHN1YkNhdGVnb3JpZXM6IEpTT04uc3RyaW5naWZ5KFsnTsOzbWluYSddKSwgaG91c2Vob2xkSWQ6IGZhbWlseUlkIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbGltZW50YWNpw7NuJywgdHlwZTogJ2V4cGVuc2UnLCBzdWJDYXRlZ29yaWVzOiBKU09OLnN0cmluZ2lmeShbJ01lcmNhZG8nXSksIGhvdXNlaG9sZElkOiBmYW1pbHlJZCB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldmFsaWRhdGVQYXRoKCcvJyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoieVRBZ0tzQiJ9
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>AccountsSidebar
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/context/FinanceContext.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$dashboard$2f$RealisticAccountCard$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/x.js [app-client] (ecmascript) <export default as X>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$house$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Home$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/house.js [app-client] (ecmascript) <export default as Home>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$calculator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Calculator$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/calculator.js [app-client] (ecmascript) <export default as Calculator>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$settings$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Settings$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/settings.js [app-client] (ecmascript) <export default as Settings>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$log$2d$out$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__LogOut$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/log-out.js [app-client] (ecmascript) <export default as LogOut>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/client/app-dir/link.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/lib/utils.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/navigation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$9d769b__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/app/data:9d769b [app-client] (ecmascript) <text/javascript>");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
;
function AccountsSidebar({ isOpen, onClose, className }) {
    _s();
    const { accounts, currentUser } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useFinance"])();
    const visibleAccounts = accounts.filter((a)=>!a.isHidden);
    // 1. Patrimonio Total (Suma de todos los balances brutos)
    const totalPatrimony = visibleAccounts.reduce((sum, acc)=>sum + acc.balance, 0);
    // 2. Total Ahorrado (Suma de los balanceSafe de cada cuenta)
    const totalReservedSavings = visibleAccounts.reduce((sum, acc)=>sum + (acc.balanceSafe || 0), 0);
    //const totalPatrimony = visibleAccounts.reduce((sum, acc) => sum + acc.balance, 0);
    const totalAvailable = totalPatrimony - totalReservedSavings;
    const pathname = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["usePathname"])();
    const navClass = (path)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex items-center gap-3 p-3 rounded-lg transition-colors font-medium text-sm", pathname === path ? "bg-indigo-900/50 text-indigo-400 border border-indigo-500/30" : "text-zinc-400 hover:bg-zinc-900 hover:text-zinc-100");
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("fixed inset-0 bg-black/80 z-40 md:hidden transition-opacity duration-300", isOpen ? "opacity-100" : "opacity-0 pointer-events-none"),
                onClick: onClose
            }, void 0, false, {
                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                lineNumber: 40,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("aside", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("fixed top-0 left-0 bottom-0 z-50 w-[280px] bg-zinc-950 border-r border-zinc-800 flex flex-col transition-transform duration-300 ease-in-out shadow-2xl", // En mvil: Se mueve dentro/fuera de la pantalla. En Desktop: Siempre visible si el padre lo dice.
                isOpen ? "translate-x-0" : pathname === '/' ? "-translate-x-full" : "-translate-x-full md:translate-x-0", className),
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "p-4 border-b border-zinc-900 flex justify-between items-center h-16",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "font-bold text-lg bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-emerald-400",
                                children: "Finance Home"
                            }, void 0, false, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                lineNumber: 62,
                                columnNumber: 21
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                variant: "ghost",
                                size: "icon",
                                onClick: onClose,
                                className: "md:hidden text-zinc-400",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__["X"], {
                                    size: 20
                                }, void 0, false, {
                                    fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                    lineNumber: 67,
                                    columnNumber: 25
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                lineNumber: 66,
                                columnNumber: 21
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                        lineNumber: 61,
                        columnNumber: 17
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-800",
                        children: [
                            currentUser && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "px-4 py-6 text-center border-b border-zinc-900/50",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "w-12 h-12 bg-indigo-900/30 text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-2 font-bold text-lg",
                                        children: currentUser.email.charAt(0).toUpperCase()
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 77,
                                        columnNumber: 29
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-xs text-zinc-500 truncate px-4",
                                        children: currentUser.email
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 80,
                                        columnNumber: 29
                                    }, this),
                                    currentUser.householdId === 'demo' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                        className: "text-[10px] text-yellow-500 font-bold tracking-wider",
                                        children: "MODO DEMO"
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 81,
                                        columnNumber: 68
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                lineNumber: 76,
                                columnNumber: 25
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "p-4",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "bg-zinc-900/50 rounded-xl p-4 border border-zinc-800/50 text-center",
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                            className: "text-[10px] text-zinc-500 uppercase tracking-widest font-bold",
                                            children: "Disponible"
                                        }, void 0, false, {
                                            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                            lineNumber: 88,
                                            columnNumber: 29
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                            className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("text-2xl font-extrabold mt-1", totalAvailable >= 0 ? "text-emerald-400" : "text-rose-400"),
                                            children: [
                                                "$",
                                                totalAvailable.toLocaleString('es-CO')
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                            lineNumber: 89,
                                            columnNumber: 29
                                        }, this),
                                        totalReservedSavings > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "mt-2 text-[10px] text-blue-400 bg-blue-900/10 py-1 px-2 rounded-full inline-block",
                                            children: [
                                                " Ahorro: $",
                                                totalReservedSavings.toLocaleString()
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                            lineNumber: 93,
                                            columnNumber: 33
                                        }, this)
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                    lineNumber: 87,
                                    columnNumber: 25
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                lineNumber: 86,
                                columnNumber: 21
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("nav", {
                                className: "px-4 space-y-1 mb-6",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                                        href: "/",
                                        onClick: ()=>window.innerWidth < 768 && onClose(),
                                        className: navClass('/'),
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$house$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Home$3e$__["Home"], {
                                                size: 18
                                            }, void 0, false, {
                                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                                lineNumber: 103,
                                                columnNumber: 29
                                            }, this),
                                            " Resumen"
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 102,
                                        columnNumber: 25
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                                        href: "/simulator",
                                        onClick: ()=>window.innerWidth < 768 && onClose(),
                                        className: navClass('/simulator'),
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$calculator$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Calculator$3e$__["Calculator"], {
                                                size: 18
                                            }, void 0, false, {
                                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                                lineNumber: 106,
                                                columnNumber: 29
                                            }, this),
                                            " Simulador"
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 105,
                                        columnNumber: 25
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                                        href: "/admin",
                                        onClick: ()=>window.innerWidth < 768 && onClose(),
                                        className: navClass('/admin'),
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$settings$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Settings$3e$__["Settings"], {
                                                size: 18
                                            }, void 0, false, {
                                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                                lineNumber: 109,
                                                columnNumber: 29
                                            }, this),
                                            " Configuracin"
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 108,
                                        columnNumber: 25
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                lineNumber: 101,
                                columnNumber: 21
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "px-4 pb-20",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                                        className: "text-xs font-bold text-zinc-600 uppercase tracking-widest mb-3 px-2",
                                        children: "Mis Cuentas"
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 115,
                                        columnNumber: 25
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "space-y-3",
                                        children: [
                                            visibleAccounts.length === 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-center text-xs text-zinc-600",
                                                children: "Sin cuentas."
                                            }, void 0, false, {
                                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                                lineNumber: 117,
                                                columnNumber: 62
                                            }, this),
                                            visibleAccounts.map((acc)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$dashboard$2f$RealisticAccountCard$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                                                    account: acc
                                                }, acc.id, false, {
                                                    fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                                    lineNumber: 119,
                                                    columnNumber: 33
                                                }, this))
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                        lineNumber: 116,
                                        columnNumber: 25
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                lineNumber: 114,
                                columnNumber: 21
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                        lineNumber: 72,
                        columnNumber: 17
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "p-4 border-t border-zinc-900 bg-zinc-950",
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                            variant: "ghost",
                            className: "w-full justify-start text-zinc-500 hover:text-red-400 hover:bg-red-950/10",
                            onClick: async ()=>{
                                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$app$2f$data$3a$9d769b__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["logoutAction"])();
                                window.location.href = '/login';
                            },
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$log$2d$out$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__LogOut$3e$__["LogOut"], {
                                    className: "mr-2 h-4 w-4"
                                }, void 0, false, {
                                    fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                                    lineNumber: 132,
                                    columnNumber: 25
                                }, this),
                                " Cerrar Sesin"
                            ]
                        }, void 0, true, {
                            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                            lineNumber: 127,
                            columnNumber: 21
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                        lineNumber: 126,
                        columnNumber: 17
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx",
                lineNumber: 49,
                columnNumber: 13
            }, this)
        ]
    }, void 0, true);
}
_s(AccountsSidebar, "eD5jawhVf8g1I8DWiOPp24D4GiY=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useFinance"],
        __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["usePathname"]
    ];
});
_c = AccountsSidebar;
var _c;
__turbopack_context__.k.register(_c, "AccountsSidebar");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>MainLayout
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/next/navigation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$dashboard$2f$AccountsSidebar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$menu$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Menu$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/menu.js [app-client] (ecmascript) <export default as Menu>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$panel$2d$left$2d$close$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PanelLeftClose$3e$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/node_modules/lucide-react/dist/esm/icons/panel-left-close.js [app-client] (ecmascript) <export default as PanelLeftClose>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/lib/utils.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Jth/Git Repository/Home/finance-home/context/FinanceContext.tsx [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
function MainLayout({ children }) {
    _s();
    const pathname = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["usePathname"])();
    const isLoginPage = pathname === '/login';
    const { currentUser } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useFinance"])();
    // Estado del Sidebar
    // - true: Abierto (Visible en Desktop empujando contenido / Visible en Mvil como overlay)
    // - false: Cerrado (Oculto en ambos)
    const [isSidebarOpen, setIsSidebarOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    if (isLoginPage) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("main", {
            className: "w-full min-h-screen bg-black",
            children: children
        }, void 0, false, {
            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
            lineNumber: 22,
            columnNumber: 16
        }, this);
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "min-h-screen bg-black text-white relative",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("fixed inset-y-0 left-0 z-50 w-[280px]", !isSidebarOpen && "hidden" // Si est cerrado, lo quitamos del DOM visualmente
                ),
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$dashboard$2f$AccountsSidebar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                    isOpen: isSidebarOpen,
                    onClose: ()=>setIsSidebarOpen(false)
                }, void 0, false, {
                    fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                    lineNumber: 34,
                    columnNumber: 17
                }, this)
            }, void 0, false, {
                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                lineNumber: 30,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex flex-col min-h-screen transition-all duration-300 ease-in-out", // MARGEN DINMICO DESKTOP: Si el sidebar est abierto, dejamos 280px a la izquierda. Si no, 0.
                isSidebarOpen ? "md:pl-[280px]" : "md:pl-0"),
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("header", {
                        className: "sticky top-0 z-40 h-16 border-b border-zinc-800 bg-black/80 backdrop-blur flex items-center px-4 justify-between",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "flex items-center gap-3",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                        variant: "ghost",
                                        size: "icon",
                                        onClick: ()=>setIsSidebarOpen(!isSidebarOpen),
                                        className: "text-zinc-400 hover:text-white hover:bg-zinc-800",
                                        children: isSidebarOpen ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$panel$2d$left$2d$close$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PanelLeftClose$3e$__["PanelLeftClose"], {}, void 0, false, {
                                            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                                            lineNumber: 59,
                                            columnNumber: 46
                                        }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$menu$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Menu$3e$__["Menu"], {}, void 0, false, {
                                            fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                                            lineNumber: 59,
                                            columnNumber: 67
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                                        lineNumber: 52,
                                        columnNumber: 25
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("font-bold text-lg bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-emerald-400", isSidebarOpen ? "md:opacity-0" : "opacity-100" // Ocultar ttulo en desktop si sidebar est abierto (ya lo tiene el sidebar)
                                        ),
                                        children: "Finance Home"
                                    }, void 0, false, {
                                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                                        lineNumber: 63,
                                        columnNumber: 25
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                                lineNumber: 50,
                                columnNumber: 21
                            }, this),
                            currentUser && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "text-xs text-zinc-500 font-mono",
                                children: currentUser.householdId === 'demo' ? 'DEMO' : 'FAMILIA'
                            }, void 0, false, {
                                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                                lineNumber: 73,
                                columnNumber: 26
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                        lineNumber: 48,
                        columnNumber: 17
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("main", {
                        className: "flex-1 p-4 md:p-8 overflow-x-hidden w-full max-w-[1600px] mx-auto",
                        children: children
                    }, void 0, false, {
                        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                        lineNumber: 80,
                        columnNumber: 17
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
                lineNumber: 41,
                columnNumber: 13
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/Jth/Git Repository/Home/finance-home/components/layout/MainLayout.tsx",
        lineNumber: 26,
        columnNumber: 9
    }, this);
}
_s(MainLayout, "Hu2VV/2SeeBRO0E0MxTpdVl6d1Q=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["usePathname"],
        __TURBOPACK__imported__module__$5b$project$5d2f$Jth$2f$Git__Repository$2f$Home$2f$finance$2d$home$2f$context$2f$FinanceContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useFinance"]
    ];
});
_c = MainLayout;
var _c;
__turbopack_context__.k.register(_c, "MainLayout");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=Jth_Git%20Repository_Home_finance-home_cef66ba5._.js.map