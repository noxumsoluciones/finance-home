{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JhtG2/Jth/Git%20Repository/Home/finance-home/context/FinanceContext.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { Account, Category, Transaction } from '@/types';\r\n\r\ninterface FinanceContextType {\r\n  accounts: Account[];\r\n  transactions: Transaction[];\r\n  categories: Category[];\r\n  addTransaction: (t: Omit<Transaction, 'id'>) => void;\r\n  updateAccountBalance: (id: string, newBalance: number) => void;\r\n}\r\n\r\nconst FinanceContext = createContext<FinanceContextType | undefined>(undefined);\r\n\r\n// DATOS INICIALES (Tus listas personalizadas)\r\nconst INITIAL_ACCOUNTS: Account[] = [\r\n  { id: '1', name: 'Thannia', bank: 'Davivienda', owner: 'Thannia', balance: 0, isHidden: false, last4: '8901' },\r\n  { id: '2', name: 'Jhonattan', bank: 'Davivienda', owner: 'Jhonattan', balance: 0, isHidden: false, last4: '1234' },\r\n  { id: '3', name: 'Jhonattan', bank: 'Banco de Bogotá', owner: 'Jhonattan', balance: 0, isHidden: false, last4: '5678' },\r\n  { id: '4', name: 'Jhonattan', bank: 'Nequi', owner: 'Jhonattan', balance: 0, isHidden: false, last4: '3321' },\r\n  { id: '5', name: 'Thannia', bank: 'Nequi', owner: 'Thannia', balance: 0, isHidden: false, last4: '4455' },\r\n  { id: '6', name: 'Thannia', bank: 'DaviPlata', owner: 'Thannia', balance: 0, isHidden: false, last4: '9988' },\r\n];\r\n\r\nconst INITIAL_CATEGORIES: Category[] = [\r\n  { id: 'inc1', name: 'MFC', type: 'income' },\r\n  { id: 'inc2', name: 'Katatek', type: 'income' },\r\n  { id: 'inc3', name: 'Noxum Soluciones', type: 'income' },\r\n  { id: 'inc4', name: 'Prima', type: 'income' },\r\n  { id: 'exp1', name: 'Casa', type: 'expense', subCategories: ['Ahorro', 'Servicios', 'Comida', 'Moto'] },\r\n  { id: 'exp2', name: 'Ordinario', type: 'expense', subCategories: ['Universidad', 'Web Cam', 'Gasto Comida', 'Hogar', 'Otros'] },\r\n  { id: 'pay1', name: 'Pagos Bancarios', type: 'expense', subCategories: ['Banco de Bogota', 'Colsubsidio', 'Sistecredito JH', 'Sistecredito TH', 'Addi JH'] },\r\n];\r\n\r\nexport const FinanceProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [accounts, setAccounts] = useState<Account[]>(INITIAL_ACCOUNTS);\r\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n  const [categories, setCategories] = useState<Category[]>(INITIAL_CATEGORIES);\r\n\r\n  // Cargar de localStorage\r\n  useEffect(() => {\r\n    const savedTx = localStorage.getItem('transactions');\r\n    const savedAcc = localStorage.getItem('accounts');\r\n    if (savedTx) setTransactions(JSON.parse(savedTx));\r\n    if (savedAcc) setAccounts(JSON.parse(savedAcc));\r\n  }, []);\r\n\r\n  // Guardar cambios\r\n  useEffect(() => {\r\n    localStorage.setItem('transactions', JSON.stringify(transactions));\r\n    localStorage.setItem('accounts', JSON.stringify(accounts));\r\n  }, [transactions, accounts]);\r\n\r\n  const addTransaction = (t: Omit<Transaction, 'id'>) => {\r\n    const newTx = { ...t, id: crypto.randomUUID() };\r\n    setTransactions(prev => [newTx, ...prev]);\r\n\r\n    // Actualizar saldo de cuenta automáticamente\r\n    setAccounts(prev => prev.map(acc => {\r\n      if (acc.id === t.accountId) {\r\n        return {\r\n          ...acc,\r\n          balance: t.type === 'income' ? acc.balance + t.amount : acc.balance - t.amount\r\n        };\r\n      }\r\n      return acc;\r\n    }));\r\n  };\r\n\r\n  const updateAccountBalance = (id: string, newBalance: number) => {\r\n    setAccounts(prev => prev.map(acc => acc.id === id ? { ...acc, balance: newBalance } : acc));\r\n  };\r\n\r\n  return (\r\n    <FinanceContext.Provider value={{ accounts, transactions, categories, addTransaction, updateAccountBalance }}>\r\n      {children}\r\n    </FinanceContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useFinance = () => {\r\n  const context = useContext(FinanceContext);\r\n  if (!context) throw new Error(\"useFinance must be used within FinanceProvider\");\r\n  return context;\r\n};"],"names":[],"mappings":"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"}}]
}