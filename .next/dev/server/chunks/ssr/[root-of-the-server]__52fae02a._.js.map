{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JhtG2/Jth/Git%20Repository/Home/finance-home/context/FinanceContext.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\r\nimport { Account, Category, Transaction, FixedExpenseRule } from '@/types';\r\nimport { startOfMonth, isSameMonth, getDate, setDate } from 'date-fns';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n// DATOS INICIALES (Tus listas personalizadas y datos de ejemplo)\r\n// NOTA: He actualizado los balances iniciales basado en tu imagen para que se vea real de entrada.\r\nconst INITIAL_ACCOUNTS: Account[] = [\r\n    { id: 'acc_dav_th', name: 'Davivienda TH', bank: 'Davivienda', owner: 'Thannia', balance: 0, isHidden: false, last4: '8901', colorTheme: 'from-red-700 to-red-900' },\r\n    { id: 'acc_dav_jh', name: 'Davivienda JH', bank: 'Davivienda', owner: 'Jhonattan', balance: 0, isHidden: false, last4: '1234', colorTheme: 'from-red-700 to-red-900' },\r\n    { id: 'acc_bdb_jh', name: 'BDB JH', bank: 'Banco de Bogotá', owner: 'Jhonattan', balance: 0, isHidden: false, last4: '5678', colorTheme: 'from-blue-800 to-blue-950' },\r\n    { id: 'acc_neq_jh', name: 'Nequi JH', bank: 'Nequi', owner: 'Jhonattan', balance: 0, isHidden: false, last4: '3321', colorTheme: 'from-purple-600 to-pink-600' },\r\n    { id: 'acc_neq_th', name: 'Nequi TH', bank: 'Nequi', owner: 'Thannia', balance: 0, isHidden: false, last4: '4455', colorTheme: 'from-purple-600 to-pink-600' },\r\n    { id: 'acc_efec', name: 'Efectivo Casa', bank: 'Efectivo', owner: 'Casa', balance: 0, isHidden: false, colorTheme: 'from-green-700 to-emerald-900' },\r\n    { id: 'acc_sodexo', name: 'Sodexo', bank: 'Sodexo', owner: 'Ambos', balance: 0, isHidden: false, colorTheme: 'from-blue-400 to-blue-600' },\r\n];\r\n\r\n// Categorías basadas en tus imágenes\r\nconst INITIAL_CATEGORIES: Category[] = [\r\n  { id: 'cat_ing_fijo', name: 'Ingreso Fijo (Salario/Aux)', type: 'income' },\r\n  { id: 'cat_ing_extra', name: 'Ingreso Extra', type: 'income' },\r\n  { id: 'cat_ahorro_meta', name: 'Ahorro Meta/Beneficiar', type: 'income' }, // Para mover plata a ahorros\r\n  \r\n  { id: 'cat_servicios', name: 'Servicios Públicos', type: 'expense', isFixedExpenseCandidate: true, subCategories: ['Enel Codensa', 'Acueducto', 'Vanti', 'Movistar + WOM', 'Claro'] },\r\n  { id: 'cat_casita', name: 'Casita/Arriendo', type: 'expense', isFixedExpenseCandidate: true, subCategories: ['Arriendo', 'Aseo mensual'] },\r\n  { id: 'cat_comida', name: 'Comida', type: 'expense', isFixedExpenseCandidate: true, subCategories: ['Mercado Mensual', 'Gasto Comida Diario'] },\r\n  { id: 'cat_moto', name: 'Moto', type: 'expense', subCategories: ['Gasolina', 'Taller', 'Seguro'] },\r\n  { id: 'cat_deudas', name: 'Pagos/Deudas', type: 'payment', isFixedExpenseCandidate: true, subCategories: ['Banco de Bogotá', 'Colsubsidio', 'Sistecredito JH', 'Sistecredito TH', 'Addi JH'] },\r\n  { id: 'cat_varios', name: 'Gastos Varios/Ordinario', type: 'expense', subCategories: ['Hogar', 'Gatos', 'Universidad', 'Regalos', 'Otros'] },\r\n  // Categoría especial interna para ahorros automáticos\r\n  { id: 'cat_sys_savings', name: 'Ahorro Automático por Superávit', type: 'income' }\r\n];\r\n\r\n\r\ninterface FinanceContextType {\r\n  accounts: Account[];\r\n  transactions: Transaction[];\r\n  categories: Category[];\r\n  fixedRules: FixedExpenseRule[];\r\n  addTransaction: (t: Omit<Transaction, 'id'>) => void;\r\n  updateTransaction: (t: Transaction) => void;\r\n  deleteTransaction: (id: string) => void;\r\n  \r\n  // Funciones de administración\r\n  addCategory: (c: Category) => void;\r\n  updateCategory: (c: Category) => void;\r\n  addAccount: (a: Account) => void;\r\n  updateAccount: (a: Account) => void;\r\n  addFixedRule: (r: FixedExpenseRule) => void;\r\n  updateFixedRule: (r: FixedExpenseRule) => void;\r\n  deleteFixedRule: (id: string) => void;\r\n}\r\n\r\nconst FinanceContext = createContext<FinanceContextType | undefined>(undefined);\r\n\r\nexport const FinanceProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [accounts, setAccounts] = useState<Account[]>(INITIAL_ACCOUNTS);\r\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n  const [categories, setCategories] = useState<Category[]>(INITIAL_CATEGORIES);\r\n  const [fixedRules, setFixedRules] = useState<FixedExpenseRule[]>([]);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n\r\n  // --- PERSISTENCIA (Cargar y Guardar en localStorage) ---\r\n  useEffect(() => {\r\n    const loadData = () => {\r\n        const savedTx = localStorage.getItem('transactions');\r\n        const savedAcc = localStorage.getItem('accounts');\r\n        const savedCat = localStorage.getItem('categories');\r\n        const savedRules = localStorage.getItem('fixedRules');\r\n        \r\n        if (savedTx) setTransactions(JSON.parse(savedTx));\r\n        // IMPORTANTE: Si ya hay cuentas guardadas, USARLAS, si no, usar las INITIAL con los saldos de tu imagen.\r\n        if (savedAcc) {\r\n            setAccounts(JSON.parse(savedAcc));\r\n        } else {\r\n             // Primera vez que corre la app, asegurar que los saldos iniciales sean los correctos\r\n             setAccounts(INITIAL_ACCOUNTS);\r\n        }\r\n\r\n        if (savedCat) setCategories(JSON.parse(savedCat));\r\n        if (savedRules) setFixedRules(JSON.parse(savedRules));\r\n        setIsInitialized(true);\r\n    }\r\n    loadData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isInitialized) return; // No guardar hasta que haya cargado\r\n    localStorage.setItem('transactions', JSON.stringify(transactions));\r\n    localStorage.setItem('accounts', JSON.stringify(accounts));\r\n    localStorage.setItem('categories', JSON.stringify(categories));\r\n    localStorage.setItem('fixedRules', JSON.stringify(fixedRules));\r\n  }, [transactions, accounts, categories, fixedRules, isInitialized]);\r\n\r\n\r\n  // --- LÓGICA CENTRAL: Actualizar Saldos ---\r\n  // Recalcula los saldos de las cuentas basado en TODAS las transacciones. Es más seguro que sumar/restar.\r\n  const recalculateBalances = useCallback((currentTransactions: Transaction[], currentAccounts: Account[]) => {\r\n    const newAccountsMap = new Map(currentAccounts.map(acc => [acc.id, { ...acc, balance: 0 }])); // Reiniciar a 0 para recalcular\r\n\r\n    // 1. Restaurar saldos iniciales \"base\" (Esto es un truco porque no tenemos DB real.\r\n    // En un sistema real, el saldo es la suma de inputs y outputs históricos.\r\n    // Para este prototipo, usaremos los saldos de INITIAL_ACCOUNTS como punto de partida si no hay transacciones, \r\n    // pero esto es complejo sin una tabla de \"saldos iniciales\". \r\n    // SIMPLIFICACIÓN PARA PROTOTIPO: El saldo es simplemente la suma algebraica de todas las transacciones.\r\n    // NOTA: Para que esto funcione bien, deberías crear transacciones de \"Saldo Inicial\" el primer día.\r\n    // POR AHORA: Usaremos una lógica incremental que funciona bien para el uso diario.\r\n\r\n  }, []);\r\n\r\n\r\n  // --- LÓGICA DE NEGOCIO PRINCIPAL ---\r\n\r\n  // 1. Agregar Transacción (Manual o Automática)\r\n  const addTransaction = (t: Omit<Transaction, 'id' | 'hasGeneratedSavings'>) => {\r\n    const newTx: Transaction = { ...t, id: uuidv4(), hasGeneratedSavings: false };\r\n    \r\n    // LÓGICA DE AHORRO AUTOMÁTICO: Si es un gasto fijo y pagué MENOS de lo presupuestado.\r\n    if (newTx.type === 'expense' && newTx.isFixed && newTx.budgetedAmount && newTx.amount < newTx.budgetedAmount) {\r\n        const savingsAmount = newTx.budgetedAmount - newTx.amount;\r\n        \r\n        // Crear automáticamente la transacción de ingreso al ahorro\r\n        const savingsTx: Transaction = {\r\n            id: uuidv4(),\r\n            type: 'income',\r\n            amount: savingsAmount,\r\n            accountId: 'acc_dav_th', // ASUMIMOS que el ahorro va a Davivienda TH (puedes cambiar esto o hacerlo configurable)\r\n            categoryId: 'cat_sys_savings',\r\n            description: `Ahorro automático por superávit en: ${newTx.description}`,\r\n            date: newTx.date,\r\n            isFixed: false\r\n        };\r\n        setTransactions(prev => [newTx, savingsTx, ...prev]);\r\n        \r\n        // Actualizar saldos (Pago del gasto Y entrada del ahorro)\r\n        updateAccountBalance(newTx.accountId, -newTx.amount);\r\n        updateAccountBalance(savingsTx.accountId, savingsTx.amount);\r\n        newTx.hasGeneratedSavings = true; // Marcar para no duplicar si se edita\r\n\r\n    } else {\r\n        // Transacción normal\r\n        setTransactions(prev => [newTx, ...prev]);\r\n        const multiplier = newTx.type === 'income' ? 1 : -1;\r\n        updateAccountBalance(newTx.accountId, newTx.amount * multiplier);\r\n    }\r\n  };\r\n\r\n  // Helper simple para actualizar saldos de forma incremental\r\n  const updateAccountBalance = (accountId: string, amountChange: number) => {\r\n    setAccounts(prevAccounts => \r\n        prevAccounts.map(acc => \r\n            acc.id === accountId ? { ...acc, balance: acc.balance + amountChange } : acc\r\n        )\r\n    );\r\n  };\r\n\r\n  // 2. Función para generar gastos fijos al inicio del mes\r\n  const generateMonthlyFixedExpenses = useCallback(() => {\r\n    if (!isInitialized || fixedRules.length === 0) return;\r\n\r\n    const now = new Date();\r\n    const startOfCurrentMonth = startOfMonth(now);\r\n\r\n    // Verificar si ya se corrió este proceso este mes\r\n    const alreadyGenerated = transactions.some(tx => \r\n        tx.isFixed && tx.fixedRuleId && isSameMonth(new Date(tx.date), now)\r\n    );\r\n\r\n    if (alreadyGenerated) return;\r\n\r\n    console.log(\"Generando gastos fijos del mes...\");\r\n    const newTransactions: Transaction[] = fixedRules.map(rule => {\r\n        // Crear la fecha para este mes en el día configurado\r\n        const txDate = setDate(startOfCurrentMonth, rule.dayOfMonth);\r\n        \r\n        return {\r\n            id: uuidv4(),\r\n            type: 'expense',\r\n            amount: 0, // Al crearse automáticamente, el valor REAL pagado es 0 hasta que el usuario lo actualice\r\n            budgetedAmount: rule.budgetedAmount, // Este es el valor que se espera pagar\r\n            accountId: rule.accountIdToCharge,\r\n            categoryId: rule.categoryId,\r\n            subCategoryId: rule.subCategoryId,\r\n            description: `${rule.description} (Proyectado)`,\r\n            date: txDate.toISOString(),\r\n            isFixed: true,\r\n            fixedRuleId: rule.id\r\n        };\r\n    });\r\n\r\n    // Agregamos en lote y NO actualizamos saldos porque el amount real es 0.\r\n    setTransactions(prev => [...newTransactions, ...prev]);\r\n\r\n  }, [isInitialized, fixedRules, transactions]);\r\n\r\n  // Ejecutar la generación de gastos fijos cuando carga la app y el contexto está listo\r\n  useEffect(() => {\r\n    if(isInitialized) {\r\n        generateMonthlyFixedExpenses();\r\n    }\r\n  }, [isInitialized, generateMonthlyFixedExpenses]);\r\n\r\n\r\n  // --- FUNCIONES CRUD (Simplificadas para el ejemplo, se pueden expandir) ---\r\n  // NOTA IMPORTANTE: Para un sistema de producción real, editar una transacción vieja\r\n  // debería recalcular todos los saldos desde esa fecha. Aquí usamos una aproximación simple.\r\n  \r\n  const updateTransaction = (updatedTx: Transaction) => {\r\n    setTransactions(prev => prev.map(tx => tx.id === updatedTx.id ? updatedTx : tx));\r\n    // NOTA: Aquí falta una lógica compleja para revertir el saldo anterior y aplicar el nuevo.\r\n    // Para este prototipo, es mejor borrar y volver a crear si el monto cambia drásticamente.\r\n    // Se implementará una versión simple: calcular la diferencia.\r\n    const oldTx = transactions.find(t => t.id === updatedTx.id);\r\n    if(!oldTx) return;\r\n\r\n    const oldEffect = oldTx.type === 'income' ? oldTx.amount : -oldTx.amount;\r\n    const newEffect = updatedTx.type === 'income' ? updatedTx.amount : -updatedTx.amount;\r\n    \r\n    if(oldTx.accountId === updatedTx.accountId) {\r\n        // Misma cuenta, solo ajustar la diferencia\r\n        updateAccountBalance(updatedTx.accountId, newEffect - oldEffect);\r\n    } else {\r\n        // Cambio de cuenta: revertir en la vieja, aplicar en la nueva\r\n        updateAccountBalance(oldTx.accountId, -oldEffect);\r\n        updateAccountBalance(updatedTx.accountId, newEffect);\r\n    }\r\n\r\n    // REVISAR LÓGICA DE AHORRO AL EDITAR (Si ahora sobra dinero y antes no)\r\n    if (updatedTx.type === 'expense' && updatedTx.isFixed && updatedTx.budgetedAmount && !updatedTx.hasGeneratedSavings) {\r\n         if(updatedTx.amount < updatedTx.budgetedAmount) {\r\n             const savingsAmount = updatedTx.budgetedAmount - updatedTx.amount;\r\n             const savingsTx: Transaction = {\r\n                 id: uuidv4(), type: 'income', amount: savingsAmount,\r\n                 accountId: 'acc_dav_th', categoryId: 'cat_sys_savings',\r\n                 description: `Ahorro automático (corrección): ${updatedTx.description}`,\r\n                 date: new Date().toISOString(), isFixed: false\r\n             };\r\n             setTransactions(prev => [savingsTx, ...prev]);\r\n             updateAccountBalance(savingsTx.accountId, savingsTx.amount);\r\n             // Marcar la original como que ya generó ahorro\r\n             setTransactions(prev => prev.map(tx => tx.id === updatedTx.id ? {...tx, hasGeneratedSavings: true} : tx));\r\n         }\r\n    }\r\n  };\r\n\r\n\r\n  const deleteTransaction = (id: string) => {\r\n    const txToDelete = transactions.find(tx => tx.id === id);\r\n    if(!txToDelete) return;\r\n    // Revertir saldo\r\n    const multiplier = txToDelete.type === 'income' ? -1 : 1; // Inverso para borrar\r\n    updateAccountBalance(txToDelete.accountId, txToDelete.amount * multiplier);\r\n    setTransactions(prev => prev.filter(tx => tx.id !== id));\r\n  };\r\n\r\n  // Admin functions placeholders\r\n  const addCategory = (c: Category) => setCategories(prev => [...prev, c]);\r\n  const updateCategory = (c: Category) => setCategories(prev => prev.map(cat => cat.id === c.id ? c : cat));\r\n  const addAccount = (a: Account) => setAccounts(prev => [...prev, a]);\r\n  const updateAccount = (a: Account) => setAccounts(prev => prev.map(acc => acc.id === a.id ? a : acc));\r\n  const addFixedRule = (r: FixedExpenseRule) => setFixedRules(prev => [...prev, r]);\r\n  const updateFixedRule = (r: FixedExpenseRule) => setFixedRules(prev => prev.map(rule => rule.id === r.id ? r : rule));\r\n  const deleteFixedRule = (id: string) => setFixedRules(prev => prev.filter(rule => rule.id !== id));\r\n\r\n\r\n  return (\r\n    <FinanceContext.Provider value={{\r\n      accounts, transactions, categories, fixedRules,\r\n      addTransaction, updateTransaction, deleteTransaction,\r\n      addCategory, updateCategory, addAccount, updateAccount,\r\n      addFixedRule, updateFixedRule, deleteFixedRule\r\n    }}>\r\n      {isInitialized ? children : <div className=\"p-8 text-center\">Cargando finanzas...</div>}\r\n    </FinanceContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useFinance = () => {\r\n  const context = useContext(FinanceContext);\r\n  if (!context) throw new Error(\"useFinance must be used within FinanceProvider\");\r\n  return context;\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JhtG2/Jth/Git%20Repository/Home/finance-home/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,2NAAO,EAAC,IAAA,kMAAI,EAAC;AACtB"}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JhtG2/Jth/Git%20Repository/Home/finance-home/components/dashboard/RealisticAccountCard.tsx"],"sourcesContent":["// components/dashboard/RealisticAccountCard.tsx\r\nimport { Account } from '@/types';\r\nimport { CreditCard, Wallet, Landmark, Banknote } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport default function RealisticAccountCard({ account }: { account: Account }) {\r\n  // Elegir icono según el tipo de \"banco\"\r\n  const Icon = account.bank === 'Efectivo' ? Banknote : \r\n               account.bank === 'Nequi' || account.bank === 'DaviPlata' ? Wallet : \r\n               account.bank === 'Sodexo' ? CreditCard : Landmark;\r\n\r\n  return (\r\n    <div className={cn(\r\n      \"relative overflow-hidden rounded-xl p-4 text-white shadow-lg transition-transform hover:scale-[1.02]\",\r\n      \"bg-gradient-to-br\", \r\n      account.colorTheme || \"from-zinc-700 to-zinc-900\", // Color por defecto si falta\r\n      account.balance === 0 ? \"opacity-75 grayscale-[50%]\" : \"\" // Efecto visual si está en 0\r\n    )}>\r\n      {/* Ruido de fondo para textura de tarjeta */}\r\n      <div className=\"absolute inset-0 opacity-10 mix-blend-overlay pointer-events-none\" \r\n           style={{backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 200 200\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cfilter id=\\'noiseFilter\\'%3E%3CfeTurbulence type=\\'fractalNoise\\' baseFrequency=\\'0.65\\' numOctaves=\\'3\\' stitchTiles=\\'stitch\\'/%3E%3C/filter%3E%3Crect width=\\'100%25\\' height=\\'100%25\\' filter=\\'url(%23noiseFilter)\\'/%3E%3C/svg%3E\")'}}></div>\r\n      \r\n      <div className=\"relative z-10 flex flex-col h-full justify-between min-h-[100px]\">\r\n        <div className=\"flex justify-between items-start\">\r\n          <div>\r\n            <p className=\"font-bold text-sm opacity-90\">{account.bank}</p>\r\n            <p className=\"text-xs opacity-75\">{account.name} ({account.owner})</p>\r\n          </div>\r\n          <Icon className=\"opacity-80\" size={24} />\r\n        </div>\r\n\r\n        <div className=\"mt-4\">\r\n           <p className=\"text-xs opacity-75 mb-1\">Saldo Disponible</p>\r\n           <p className=\"text-2xl font-mono font-bold tracking-tight\">\r\n             ${account.balance.toLocaleString('es-CO')}\r\n           </p>\r\n           {account.last4 && <p className=\"text-xs opacity-60 text-right mt-1\">**** {account.last4}</p>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,gDAAgD;;;;;;AAEhD;AAAA;AAAA;AAAA;AACA;;;;AAEe,SAAS,qBAAqB,EAAE,OAAO,EAAwB;IAC5E,wCAAwC;IACxC,MAAM,OAAO,QAAQ,IAAI,KAAK,aAAa,2QAAQ,GACtC,QAAQ,IAAI,KAAK,WAAW,QAAQ,IAAI,KAAK,cAAc,qQAAM,GACjE,QAAQ,IAAI,KAAK,WAAW,qRAAU,GAAG,2QAAQ;IAE9D,qBACE,mSAAC;QAAI,WAAW,IAAA,uKAAE,EAChB,wGACA,qBACA,QAAQ,UAAU,IAAI,6BACtB,QAAQ,OAAO,KAAK,IAAI,+BAA+B,GAAG,6BAA6B;;;0BAGvF,mSAAC;gBAAI,WAAU;gBACV,OAAO;oBAAC,iBAAiB;gBAA6U;;;;;;0BAE3W,mSAAC;gBAAI,WAAU;;kCACb,mSAAC;wBAAI,WAAU;;0CACb,mSAAC;;kDACC,mSAAC;wCAAE,WAAU;kDAAgC,QAAQ,IAAI;;;;;;kDACzD,mSAAC;wCAAE,WAAU;;4CAAsB,QAAQ,IAAI;4CAAC;4CAAG,QAAQ,KAAK;4CAAC;;;;;;;;;;;;;0CAEnE,mSAAC;gCAAK,WAAU;gCAAa,MAAM;;;;;;;;;;;;kCAGrC,mSAAC;wBAAI,WAAU;;0CACZ,mSAAC;gCAAE,WAAU;0CAA0B;;;;;;0CACvC,mSAAC;gCAAE,WAAU;;oCAA8C;oCACvD,QAAQ,OAAO,CAAC,cAAc,CAAC;;;;;;;4BAElC,QAAQ,KAAK,kBAAI,mSAAC;gCAAE,WAAU;;oCAAqC;oCAAM,QAAQ,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;AAKlG"}},
    {"offset": {"line": 612, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JhtG2/Jth/Git%20Repository/Home/finance-home/components/dashboard/AccountsSidebar.tsx"],"sourcesContent":["// components/dashboard/AccountsSidebar.tsx\r\n\"use client\";\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport RealisticAccountCard from './RealisticAccountCard';\r\n\r\nexport default function AccountsSidebar({ className }: { className?: string }) {\r\n  const { accounts } = useFinance();\r\n  const visibleAccounts = accounts.filter(a => !a.isHidden);\r\n  const totalBalance = visibleAccounts.reduce((sum, acc) => sum + acc.balance, 0);\r\n\r\n  return (\r\n    <aside className={`bg-zinc-900/50 border-l border-zinc-800 p-4 overflow-y-auto ${className}`}>\r\n      <h2 className=\"text-lg font-bold mb-4 text-zinc-300\">Mis Cuentas</h2>\r\n      <div className=\"mb-4 p-3 bg-zinc-950 rounded-lg border border-zinc-800\">\r\n         <p className=\"text-sm text-zinc-500\">Saldo Total Global</p>\r\n         <p className=\"text-2xl font-bold text-emerald-400\">${totalBalance.toLocaleString('es-CO')}</p>\r\n      </div>\r\n      <div className=\"space-y-3\">\r\n        {visibleAccounts.map(acc => (\r\n          <RealisticAccountCard key={acc.id} account={acc} />\r\n        ))}\r\n      </div>\r\n    </aside>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,2CAA2C;;;;;;AAE3C;AACA;AAFA;;;;AAIe,SAAS,gBAAgB,EAAE,SAAS,EAA0B;IAC3E,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,6LAAU;IAC/B,MAAM,kBAAkB,SAAS,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,QAAQ;IACxD,MAAM,eAAe,gBAAgB,MAAM,CAAC,CAAC,KAAK,MAAQ,MAAM,IAAI,OAAO,EAAE;IAE7E,qBACE,mSAAC;QAAM,WAAW,CAAC,4DAA4D,EAAE,WAAW;;0BAC1F,mSAAC;gBAAG,WAAU;0BAAuC;;;;;;0BACrD,mSAAC;gBAAI,WAAU;;kCACZ,mSAAC;wBAAE,WAAU;kCAAwB;;;;;;kCACrC,mSAAC;wBAAE,WAAU;;4BAAsC;4BAAE,aAAa,cAAc,CAAC;;;;;;;;;;;;;0BAEpF,mSAAC;gBAAI,WAAU;0BACZ,gBAAgB,GAAG,CAAC,CAAA,oBACnB,mSAAC,gNAAoB;wBAAc,SAAS;uBAAjB,IAAI,EAAE;;;;;;;;;;;;;;;;AAK3C"}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/JhtG2/Jth/Git%20Repository/Home/finance-home/components/ui/sonner.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n  CircleCheckIcon,\n  InfoIcon,\n  Loader2Icon,\n  OctagonXIcon,\n  TriangleAlertIcon,\n} from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner, type ToasterProps } from \"sonner\"\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      icons={{\n        success: <CircleCheckIcon className=\"size-4\" />,\n        info: <InfoIcon className=\"size-4\" />,\n        warning: <TriangleAlertIcon className=\"size-4\" />,\n        error: <OctagonXIcon className=\"size-4\" />,\n        loading: <Loader2Icon className=\"size-4 animate-spin\" />,\n      }}\n      style={\n        {\n          \"--normal-bg\": \"var(--popover)\",\n          \"--normal-text\": \"var(--popover-foreground)\",\n          \"--normal-border\": \"var(--border)\",\n          \"--border-radius\": \"var(--radius)\",\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAVA;;;;;AAYA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,iNAAQ;IAErC,qBACE,mSAAC,wMAAM;QACL,OAAO;QACP,WAAU;QACV,OAAO;YACL,uBAAS,mSAAC,gSAAe;gBAAC,WAAU;;;;;;YACpC,oBAAM,mSAAC,uQAAQ;gBAAC,WAAU;;;;;;YAC1B,uBAAS,mSAAC,sSAAiB;gBAAC,WAAU;;;;;;YACtC,qBAAO,mSAAC,uRAAY;gBAAC,WAAU;;;;;;YAC/B,uBAAS,mSAAC,yRAAW;gBAAC,WAAU;;;;;;QAClC;QACA,OACE;YACE,eAAe;YACf,iBAAiB;YACjB,mBAAmB;YACnB,mBAAmB;QACrB;QAED,GAAG,KAAK;;;;;;AAGf"}}]
}